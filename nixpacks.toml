[phases.setup]
nixPkgs = ["nodejs_22", "yarn"]

[phases.setup.nixPkgsArchive]
archive = "3030f185ba6a4bf4f18b87f345f104e6a6961f7a"

[phases.install]
cmds = [
  "yarn install --frozen-lockfile"
]

[phases.build]
cmds = [
  "yarn workspace server-app run prisma:generate",
  "yarn workspace server-app run prisma:migrate:prod",
  "yarn workspace server-app run build"
]

[start]
cmd = "yarn workspace server-app run start:prod"